# Nicolai map code (gravity / vielbein perturbation)

This repository contains the Python code used in our paper to

1. **build and solve the linear constraint system** that fixes the coefficients in our Nicolai-map ansatz (up to the orders implemented here), and  
2. **export the solved map** in a LaTeX-ready form.

> **Quick summary (EN)**
> - `python solve.py` → generates/updates `tex_solution.txt`
> - `python prove.py` → runs a consistency check showing that, **at order κ**, the existence conditions for the gravitational Nicolai map **require SUSY** (i.e. the form induced by pure \(\mathcal N=1\) supergravity); prints the result to the console

---

## Outputs

- **`tex_solution.txt`**  
  LaTeX expressions for the solved map terms (generated by `solve.py`; overwritten each run).

- **Console logs**  
  Both entry scripts print progress/debug information to stdout (you can redirect to a file).

---

## Requirements

Tested with **Python 3.12.7** (Anaconda on Windows).

Install dependencies:

```bash
python -m pip install -r requirements.txt
```

`requirements.txt` contains:
- `sympy`
- `z3-solver`

---

## Quick start

From the repository root:

```bash
python solve.py
```

This regenerates:

- `tex_solution.txt`

If you want to keep a record of the run:

```bash
python solve.py > solve_log.txt
```

---

## Reproducing the SUSY-necessity check (κ order)

Run:

```bash
python prove.py
```

What it does (high-level):

- Loads the same constraint equations used in the main pipeline.
- Performs elimination on a subset of equations while treating certain **action-coefficient symbols** (those with names like `action_*`) as *external parameters*.
- Any remaining “parameter-only” residual constraints signal **consistency conditions on the fermionic action**.
- In our use, this reproduces the statement that **at order κ the gravity Nicolai map conditions force the fermion action to take the SUSY-induced form** (i.e. the structure obtained from pure \(\mathcal N=1\) supergravity).

To save the (potentially long) output:

```bash
python prove.py > prove_log.txt
```

> **Tip:** If you see `ModuleNotFoundError` for modules like `zero_one`, make sure you are running the command from the **repository root** (so that imports like `from zero_one import ...` resolve correctly).

---

## Repository structure (high-level)

### Main entrypoints

- **`solve.py`**  
  Collects all equations, solves them, and exports the LaTeX map into `tex_solution.txt`.

- **`prove.py`**  
  Consistency/necessity check used to extract constraints on action-coefficient symbols (used to argue SUSY necessity at order κ).

### Building the equation system (constraints)

Each module constructs a dictionary of SymPy expressions (equations), typically linear in the unknown map coefficients:

- **`zero_one.py`** → `zero_one_condition`
- **`one_one.py`** → `one_one_condition`
- **`zero_two.py`** → `zero_two_condition`
- **`one_two.py`** → `one_two_condition`
- **`two_two.py`** → `two_two_condition`

These are imported and assembled in `solve.py` (and also in `prove.py`).

### Ansatz / basis generation

- **`ansatz.py`**  
  Generates the ansatz terms and organizes index/derivative structures (e.g. `map_ansatz(...)`).

### Linear algebra utilities

- **`linear_algebra.py`**  
  Helper routines for manipulating linear systems (e.g. Gauss–Jordan elimination in a sparse/dict style).

### Left-hand-side templates

- **`left.py`**  
  Pre-defined “left-hand side” building blocks (e.g. `zero_one_left`, `one_one_left`, `zero_two_A_left`, …) used by the constraint modules.

### Parsing / expression splitting helpers

- **`spl.py`**  
  Small helper utilities to split large expressions at top-level `+/-` safely.

### Logs / sample outputs

- **`result.txt`**  
  Example console output from a `solve.py` run (kept mainly for debugging / sanity checks).

---

## Notes

- Intermediate expressions can get large; a machine with ample RAM is recommended.
- The code is organized so that the Python modules mirror the logical blocks of the constraint system in the paper.
- If you want to rearrange files into subfolders (e.g. put `prove.py` under `prove/`), you may need to adjust `PYTHONPATH` or add a small `sys.path` tweak, since the current imports assume execution from the repository root.

---

## Citation

If you use this code or derived outputs, please cite our paper (arXiv identifier to be added after upload).
